<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpeg" href="logo.jpg">
    <link rel="apple-touch-icon" href="logo.jpg">
    <title>NHL NHL Edge Report</title>
    <meta name="description" content="NHL Edge tracking stats for every fan. Advanced skating, shooting, and deployment metrics for all NHL players.">
    <meta property="og:title" content="NHL NHL Edge Report">
    <meta property="og:description" content="Beyond the box score. Advanced NHL Edge tracking stats for every fan.">
    <!-- Tailwind CSS built at deploy time - no more CDN! -->
    <link rel="stylesheet" href="styles.css?v=17">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body class="bg-void text-gray-300 font-mono min-h-screen selection:bg-neon-pink selection:text-white">
    <header class="border-b-2 border-neon-cyan bg-void-light sticky top-0 z-50">
        <div class="max-w-[1920px] mx-auto px-4 py-4 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-3">
                <img src="logo.jpg?v=2" alt="NHL Edge Report Logo" class="w-10 h-10 rounded border border-neon-cyan/50">
                <h1 class="font-arcade text-xl md:text-2xl text-transparent bg-clip-text bg-gradient-to-r from-neon-cyan to-neon-pink drop-shadow-[0_0_5px_rgba(0,243,255,0.5)]">
                    NHL EDGE REPORT
                </h1>
            </div>
            <div class="flex items-center gap-4 text-xs">
                 <span class="text-neon-cyan animate-pulse">● LIVE DATA</span>
                 <span id="last-updated" class="text-gray-500">Initializing...</span>
            </div>
        </div>
    </header>

    <!-- Hero Banner -->
    <div class="relative w-full h-32 md:h-48 overflow-hidden">
        <img src="hero.png?v=1" alt="NHL Edge Report Banner" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-gradient-to-t from-void via-transparent to-transparent"></div>
        <div class="absolute bottom-4 left-4 md:left-8">
            <p class="font-arcade text-xs md:text-sm text-neon-cyan drop-shadow-[0_0_10px_rgba(0,243,255,0.8)]">BEYOND THE BOX SCORE</p>
        </div>
    </div>

    <!-- Info Section -->
    <div class="bg-void-light border-b border-grid-line">
        <div class="max-w-[1920px] mx-auto">
            <button id="info-toggle" class="w-full px-4 py-3 text-left text-xs text-gray-400 hover:text-neon-cyan flex items-center gap-2 transition-colors">
                <span class="text-neon-cyan">?</span>
                <span>How to read this data</span>
                <span id="info-arrow" class="ml-auto transition-transform">▼</span>
            </button>
            <div id="info-content" class="hidden px-4 pb-4">
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs">
                    <div class="bg-void p-3 border border-grid-line">
                        <h3 class="text-neon-cyan font-bold mb-2">TRADITIONAL STATS</h3>
                        <ul class="space-y-1 text-gray-400">
                            <li><span class="text-white">GP</span> — Games Played</li>
                            <li><span class="text-white">TOI</span> — Avg Time On Ice (min/game)</li>
                            <li><span class="text-white">G / A / PTS</span> — Goals / Assists / Points</li>
                            <li><span class="text-white">P/60</span> — Points per 60 minutes of ice time</li>
                            <li><span class="text-white">HITS</span> — Total hits this season</li>
                        </ul>
                    </div>
                    <div class="bg-void p-3 border border-grid-line">
                        <h3 class="text-neon-green font-bold mb-2">SKATING (NHL EDGE)</h3>
                        <ul class="space-y-1 text-gray-400">
                            <li><span class="text-white">TOP MPH</span> — Fastest speed recorded</li>
                            <li><span class="text-white">BURST 20+</span> — Sprints over 20 mph</li>
                            <li><span class="text-white">BURST 22+</span> — Sprints over 22 mph</li>
                            <li><span class="text-white">DIST/G</span> — Miles skated per game</li>
                        </ul>
                    </div>
                    <div class="bg-void p-3 border border-grid-line">
                        <h3 class="text-neon-pink font-bold mb-2">SHOOTING & DEPLOYMENT</h3>
                        <ul class="space-y-1 text-gray-400">
                            <li><span class="text-white">SLAP MPH</span> — Hardest shot recorded</li>
                            <li><span class="text-white">S/60</span> — Shots per 60 min of ice time</li>
                            <li><span class="text-white">OZ%</span> — % of 5v5 time in offensive zone</li>
                            <li><span class="text-white">ZS%</span> — Offensive zone start % (deployment)</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-3 text-[10px] text-gray-500">
                    <span class="text-neon-green">● Green highlighting</span> = 75th+ percentile league-wide &nbsp;|&nbsp;
                    <span class="text-neon-pink">● Pink highlighting</span> = 90th+ percentile (elite)
                </div>
            </div>
        </div>
    </div>

    <!-- Filter Bar -->
    <div class="bg-void border-b border-grid-line p-4">
        <div class="max-w-[1920px] mx-auto flex flex-wrap gap-4 items-center">
            <!-- Primary: View Type (Teams vs Players) -->
            <div class="flex items-center gap-2">
                <span class="text-[10px] uppercase tracking-widest text-gray-500">View</span>
                <select id="view-type" class="select-with-caret bg-void-light border border-neon-cyan text-neon-cyan text-xs p-2 pr-6 rounded-none focus:border-neon-cyan focus:outline-none uppercase font-bold cursor-pointer">
                    <option value="teams">Teams</option>
                    <option value="players">Players</option>
                </select>
            </div>
            <!-- Scope Filter -->
            <div class="flex items-center gap-2">
                <span class="text-[10px] uppercase tracking-widest text-gray-500">Scope</span>
                <select id="filter-type" class="select-with-caret bg-void-light border border-gray-700 text-white text-xs p-2 pr-6 rounded-none focus:border-neon-cyan focus:outline-none uppercase cursor-pointer">
                    <option value="league">Full League</option>
                    <option value="division">By Division</option>
                    <option value="conference">By Conference</option>
                    <option value="team">By Team</option>
                </select>
            </div>
            <select id="filter-team" class="hidden select-with-caret bg-void-light border border-gray-700 text-white text-xs p-2 pr-6 rounded-none focus:border-neon-cyan focus:outline-none uppercase cursor-pointer">
                <option value="WSH">Washington Capitals</option>
            </select>
            <select id="filter-division" class="hidden select-with-caret bg-void-light border border-gray-700 text-white text-xs p-2 pr-6 rounded-none focus:border-neon-cyan focus:outline-none uppercase cursor-pointer">
                <option value="Metropolitan">Metropolitan</option>
                <option value="Atlantic">Atlantic</option>
                <option value="Central">Central</option>
                <option value="Pacific">Pacific</option>
            </select>
            <select id="filter-conference" class="hidden select-with-caret bg-void-light border border-gray-700 text-white text-xs p-2 pr-6 rounded-none focus:border-neon-cyan focus:outline-none uppercase cursor-pointer">
                <option value="Eastern">Eastern Conf</option>
                <option value="Western">Western Conf</option>
            </select>
            <!-- Player Type (only shown when Players view selected, comes LAST) -->
            <select id="position-toggle" class="hidden select-with-caret bg-void-light border border-neon-green text-neon-green text-xs p-2 pr-6 rounded-none focus:border-neon-green focus:outline-none uppercase cursor-pointer">
                <option value="forwards">Forwards</option>
                <option value="defensemen">Defensemen</option>
                <option value="goalies">Goalies</option>
            </select>
            <div class="ml-auto flex items-center gap-4 font-arcade text-[10px] text-gray-500">
                <span id="position-count"></span>
                <span id="skater-count-label">SKATERS: <span id="player-count" class="text-neon-pink">0</span></span>
            </div>
        </div>
    </div>

    <main class="max-w-[1920px] mx-auto p-0 md:p-4">
        <!-- Team Speed Display (shown when viewing specific team) -->
        <div id="team-speed-display" class="hidden bg-void-light border border-grid-line p-3 mb-4"></div>

        <div id="loading" class="py-20 text-center">
            <div class="inline-block w-4 h-4 bg-neon-cyan animate-bounce mr-1"></div>
            <div class="inline-block w-4 h-4 bg-neon-pink animate-bounce mr-1" style="animation-delay: 0.1s"></div>
            <div class="inline-block w-4 h-4 bg-neon-green animate-bounce" style="animation-delay: 0.2s"></div>
            <div class="mt-4 font-arcade text-xs text-neon-cyan">LOADING ROSTERS...</div>
        </div>

        <div id="table-container" class="hidden">
            <div class="border border-grid-line bg-void-light/50 backdrop-blur-sm">
                <!-- Single Table -->
                <div class="overflow-x-auto custom-scrollbar" id="skater-table-wrapper">
                    <table class="w-full text-xs text-left border-collapse" id="players-table">
                        <thead class="sticky top-0 z-30 bg-void border-b-2 border-neon-cyan text-neon-cyan font-bold tracking-wider">
                            <tr>
                                <th class="p-3 sticky left-0 z-40 bg-void border-r border-grid-line min-w-[50px] cursor-pointer hover:text-white font-bold" data-sort="jersey_number" title="Jersey Number">#</th>
                                <th class="p-3 min-w-[160px] cursor-pointer hover:text-white" data-sort="name" title="Player Name">PLAYER</th>
                                <th class="p-3 whitespace-nowrap team-col hidden cursor-pointer hover:text-white" data-sort="team_abbr" title="Team">TM</th>
                                <th class="p-3 whitespace-nowrap cursor-pointer hover:text-white" data-sort="position" title="Position">POS</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="games_played" title="Games Played">GP</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="avg_toi" title="Average Time On Ice (minutes per game)">TOI</th>
                                <th class="p-3 whitespace-nowrap text-right text-gray-400 cursor-pointer hover:text-white" data-sort="goals" title="Goals">G</th>
                                <th class="p-3 whitespace-nowrap text-right text-gray-400 cursor-pointer hover:text-white" data-sort="assists" title="Assists">A</th>
                                <th class="p-3 whitespace-nowrap text-right text-white font-bold cursor-pointer hover:text-neon-cyan" data-sort="points" title="Total Points">PTS</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="p60" title="Points per 60 minutes of ice time">P/60</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="hits" title="Total Hits this season">HITS</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white border-r border-grid-line" data-sort="blocks" title="Total Blocked Shots this season">BLKS</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green cursor-pointer hover:text-white" data-sort="top_speed_mph" title="Top skating speed recorded this season (mph)">TOP MPH</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green cursor-pointer hover:text-white" data-sort="bursts_20_plus" title="Number of skating bursts over 20 mph">BURST 20+</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green cursor-pointer hover:text-white" data-sort="bursts_22_plus" title="Number of skating bursts over 22 mph (elite speed)">BURST 22+</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green border-r border-grid-line cursor-pointer hover:text-white" data-sort="distance_per_game_miles" title="Distance skated per game (miles)">DIST/G</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-pink cursor-pointer hover:text-white" data-sort="top_shot_speed_mph" title="Hardest shot recorded this season (mph)">SLAP MPH</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-pink cursor-pointer hover:text-white border-r border-grid-line" data-sort="shots_per_60" title="Shot attempts per 60 minutes of ice time">S/60</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="off_zone_time_pct" title="Percentage of 5v5 ice time spent in offensive zone">OZ%</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="zone_starts_off_pct" title="Offensive zone faceoff start percentage (higher = more sheltered deployment)">ZS%</th>
                            </tr>
                        </thead>
                        <tbody id="players-body" class="divide-y divide-grid-line"></tbody>
                    </table>
                </div>

                <!-- Goalie Table (hidden by default) -->
                <div id="goalie-table-wrapper" class="hidden overflow-x-auto custom-scrollbar">
                    <table class="w-full text-xs text-left border-collapse" id="goalies-table">
                        <thead class="sticky top-0 z-30 bg-void border-b-2 border-neon-cyan text-neon-cyan font-bold tracking-wider">
                            <tr>
                                <th class="p-3 sticky left-0 z-40 bg-void border-r border-grid-line min-w-[50px] cursor-pointer hover:text-white font-bold" data-sort="jersey_number" title="Jersey Number">#</th>
                                <th class="p-3 min-w-[160px] cursor-pointer hover:text-white" data-sort="name" title="Goalie Name">GOALIE</th>
                                <th class="p-3 whitespace-nowrap team-col hidden cursor-pointer hover:text-white" data-sort="team_abbr" title="Team">TM</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="games_played" title="Games Played">GP</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="wins" title="Wins">W</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="losses" title="Losses">L</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="ot_losses" title="Overtime Losses">OTL</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white border-r border-grid-line" data-sort="shutouts" title="Shutouts">SO</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green cursor-pointer hover:text-white" data-sort="goals_against_avg" title="Goals Against Average">GAA</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green cursor-pointer hover:text-white" data-sort="save_pct" title="Save Percentage">SV%</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-pink cursor-pointer hover:text-white" data-sort="high_danger_save_pct" title="High Danger Save Percentage">HDSV%</th>
                            </tr>
                        </thead>
                        <tbody id="goalies-body" class="divide-y divide-grid-line"></tbody>
                    </table>
                </div>

                <!-- Teams Table (default view) -->
                <div id="teams-table-wrapper" class="overflow-x-auto custom-scrollbar">
                    <table class="w-full text-xs text-left border-collapse" id="teams-table">
                        <thead class="sticky top-0 z-30 bg-void border-b-2 border-neon-cyan text-neon-cyan font-bold tracking-wider">
                            <tr>
                                <th class="p-3 sticky left-0 z-40 bg-void border-r border-grid-line min-w-[60px] cursor-pointer hover:text-white font-bold" data-sort="team_abbr" title="Team">TEAM</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white font-bold" data-sort="points" title="Points">PTS</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="wins" title="Wins">W</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="losses" title="Losses">L</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white border-r border-grid-line" data-sort="ot_losses" title="Overtime Losses">OTL</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="goals_for" title="Goals For">GF</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="goals_against" title="Goals Against">GA</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white border-r border-grid-line" data-sort="goal_diff" title="Goal Differential">DIFF</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-pink cursor-pointer hover:text-white" data-sort="pp_pct" title="Power Play Percentage">PP%</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-pink cursor-pointer hover:text-white border-r border-grid-line" data-sort="pk_pct" title="Penalty Kill Percentage">PK%</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green cursor-pointer hover:text-white" data-sort="weighted_avg_speed" title="TOI-weighted team skating speed (mph)">SPEED (mph)</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green cursor-pointer hover:text-white" data-sort="weighted_avg_shot_speed" title="TOI-weighted team shot speed (mph)">SHOT (mph)</th>
                                <th class="p-3 whitespace-nowrap text-right text-neon-green cursor-pointer hover:text-white border-r border-grid-line" data-sort="avg_bursts_per_game" title="Team bursts 20+ per game">BURST/G</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="total_hits" title="Total team hits this season">HITS</th>
                                <th class="p-3 whitespace-nowrap text-right cursor-pointer hover:text-white" data-sort="total_blocks" title="Total team blocked shots this season">BLKS</th>
                            </tr>
                        </thead>
                        <tbody id="teams-body" class="divide-y divide-grid-line"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Percentile Legend -->
    <footer class="bg-void-light border-t border-grid-line mt-4">
        <div class="max-w-[1920px] mx-auto px-4 py-4">
            <div class="text-center mb-3">
                <span class="font-arcade text-[10px] text-gray-500 uppercase tracking-widest">NHL Edge Percentile Key</span>
            </div>
            <div class="flex justify-center items-center gap-1 flex-wrap">
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-0 text-xs font-mono font-bold">0-9</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-10 text-xs font-mono font-bold">10-19</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-20 text-xs font-mono font-bold">20-29</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-30 text-xs font-mono font-bold">30-39</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-40 text-xs font-mono font-bold">40-49</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-50 text-xs font-mono font-bold">50-59</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-60 text-xs font-mono font-bold">60-69</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-70 text-xs font-mono font-bold">70-79</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-80 text-xs font-mono font-bold">80-89</span>
                </div>
                <div class="flex items-center gap-1 px-2 py-1 bg-void rounded border border-grid-line">
                    <span class="pct-90 text-xs font-mono font-bold">90-100</span>
                </div>
            </div>
            <div class="text-center mt-3 text-[10px] text-gray-600">
                Percentiles calculated across all NHL skaters in database
            </div>
            <div class="text-center mt-6 pt-4 border-t border-grid-line text-[9px] text-gray-600 space-y-1">
                <p>This site is not affiliated with or endorsed by the NHL or any NHL team.</p>
                <p>Player tracking data sourced from publicly available NHL Edge statistics.</p>
            </div>
        </div>
    </footer>

    <script src="app.js?v=21"></script>
</body>
</html>
